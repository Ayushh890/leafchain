<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LeafChain - Green Impact on Blockchain</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.6/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode.react@3.1.0/umd/index.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Open+Sans:wght@300;400&display=swap" rel="stylesheet">
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef, useMemo } = React;
    const QRCode = window.QRCodeReact ? window.QRCodeReact.QRCodeCanvas : null;

    // Helper Functions for Mock Database (localStorage)
    const getUsers = () => {
      const users = localStorage.getItem('leafchain_users');
      return users ? JSON.parse(users) : [];
    };

    const saveUser = (user) => {
      const users = getUsers();
      users.push(user);
      localStorage.setItem('leafchain_users', JSON.stringify(users));
    };

    // Navigation Component
    const Navbar = ({ setCurrentPage }) => (
      <nav className="bg-gradient-to-r from-green-600 to-teal-600 p-4 shadow-lg">
        <div className="container mx-auto flex justify-between items-center">
          <h1 className="text-white text-2xl font-bold font-inter">LeafChain</h1>
          <div className="space-x-4">
            {['Home', 'Create Account', 'Login', 'Dashboard', 'Leaderboard', 'Tasks', 'LiveChat'].map(page => (
              <button
                key={page}
                onClick={() => setCurrentPage(page)}
                className="text-white hover:bg-green-700 px-4 py-2 rounded-full font-inter transition duration-300"
                aria-label={`Navigate to ${page}`}
              >
                {page === 'LiveChat' ? 'Live Chat' : page}
              </button>
            ))}
          </div>
        </div>
      </nav>
    );

    // Home Page
    const Home = ({ setCurrentPage }) => (
      <div className="min-h-screen bg-gray-50">
        <div className="relative bg-gradient-to-r from-green-500 to-teal-500 text-white py-20 overflow-hidden">
          <div className="container mx-auto px-6 text-center animate-fade-in relative z-10">
            <h1 className="text-5xl font-bold font-inter mb-4">LeafChain</h1>
            <p className="text-xl font-open-sans mb-8 max-w-2xl mx-auto">
              Reward your eco-actions with blockchain-powered transparency and zero energy waste.
            </p>
            <button
              onClick={() => setCurrentPage('Login')}
              className="bg-white text-green-600 px-6 py-3 rounded-full font-inter font-semibold hover:bg-green-100 transition duration-300 shadow-md"
              aria-label="Join LeafChain"
            >
              Join Now
            </button>
          </div>
          <img
            src="https://images.unsplash.com/photo-1516684669134-de6f7c473025?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
            alt="3D Bird Watermark"
            className="absolute top-1/2 right-10 transform -translate-y-1/2 opacity-30 w-32 md:w-48 animate-float-rotate pointer-events-none"
          />
          <div className="absolute bottom-0 left-0 right-0 h-16 bg-gray-50 rounded-t-3xl"></div>
        </div>
        <div className="py-16 bg-gray-50">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-12 text-center animate-fade-in">About LeafChain</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div className="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition duration-300 animate-fade-in">
                <h3 className="text-xl font-inter text-green-600 mb-4">Our Mission</h3>
                <p className="font-open-sans text-gray-600">
                  We empower sustainable actions through blockchain, rewarding verified eco-efforts like tree planting and emission reduction with LeafCoins.
                </p>
              </div>
              <div className="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition duration-300 animate-fade-in">
                <h3 className="text-xl font-inter text-green-600 mb-4">Help Desk</h3>
                <p className="font-open-sans text-gray-600 mb-4">
                  Our team is here to assist with your LeafChain journey.
                </p>
                <ul className="font-open-sans text-gray-600">
                  <li><strong>Email:</strong> support@leafchain.org</li>
                  <li><strong>Phone:</strong> +1 (800) 555-LEAF</li>
                  <li><strong>Chat:</strong> 24/7 on Dashboard</li>
                </ul>
                <button
                  onClick={() => setCurrentPage('LiveChat')}
                  className="mt-4 text-green-600 hover:text-green-700 font-inter transition duration-300"
                  aria-label="Start Live Chat"
                >
                  Start Live Chat
                </button>
              </div>
            </div>
          </div>
        </div>
        <div className="py-16 bg-white">
          <div className="container mx-auto px-6">
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-12 text-center animate-fade-in">Our Green Impact</h2>
            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
              {[
                {
                  src: "https://images.unsplash.com/photo-1601593367530-6d3d10e4ae2c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80",
                  alt: "Recycling Bottles"
                },
                {
                  src: "https://images.unsplash.com/photo-1593693397690-362cb9666fc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80",
                  alt: "Composting"
                },
                {
                  src: "https://images.unsplash.com/photo-1611510333814-d7495ec73e44?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80",
                  alt: "Reforestation"
                }
              ].map((image, index) => (
                <div key={index} className="relative overflow-hidden rounded-lg group animate-fade-in">
                  <img
                    src={image.src}
                    alt={image.alt}
                    className="w-full h-64 object-cover rounded-lg transform group-hover:scale-105 transition duration-500"
                  />
                  <div className="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition duration-300 flex items-center justify-center">
                    <p className="text-white font-open-sans opacity-0 group-hover:opacity-100 transition duration-300">{image.alt}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    );

    // Live Chat Page
    const LiveChat = ({ setCurrentPage }) => {
      const [messages, setMessages] = useState([]);
      const [input, setInput] = useState('');
      const chatRef = useRef(null);

      const getBotResponse = (message) => {
        const lowerMessage = message.toLowerCase();
        if (lowerMessage.includes('create account') || lowerMessage.includes('sign up')) {
          return "To create an account, click 'Create Account' in the navigation bar, fill in your username, email, and password, then click 'Sign Up'. Ensure your password is at least 6 characters long. Need help with anything else?";
        } else if (lowerMessage.includes('login') || lowerMessage.includes('log in')) {
          return "To log in, click 'Login' in the navigation bar, enter your username and password, then click 'Login'. If you don't have an account, create one first. Any other questions?";
        } else if (lowerMessage.includes('send leafcoins') || lowerMessage.includes('send coins') || lowerMessage.includes('qr code')) {
          return "To send LeafCoins, go to the Dashboard, click 'Scan QR Code to Send' or 'Upload QR Code from Camera' in the 'Send Coins' section, scan or upload the recipient's QR code, enter the amount, and click 'Send'. Ensure you have enough LeafCoins. Need more help?";
        } else if (lowerMessage.includes('earn leafcoins') || lowerMessage.includes('earn coins')) {
          return "You can earn LeafCoins by completing eco-friendly tasks. Go to the 'Tasks' page, choose a daily or weekly task (e.g., 'Plant a Tree'), complete it, and upload proof on the Upload page. Rewards are added to your balance. Want to explore tasks now?";
        } else if (lowerMessage.includes('qr scanner not working') || lowerMessage.includes('camera not working')) {
          return "Sorry to hear that! Ensure camera permissions are enabled for this website. Try refreshing the page or using the 'Upload QR Code from Camera' option. If the issue persists, upload a QR code image manually. Anything else I can assist with?";
        } else if (lowerMessage.includes('connect wallet') || lowerMessage.includes('wallet not working')) {
          return "To connect a wallet, go to the Dashboard, click 'Connect Web3 Wallet', enter your wallet address, select a network (e.g., BEP20), and click 'Connect Wallet'. Ensure the address is valid. Still having issues? Let me know!";
        } else if (lowerMessage.includes('what is leafchain') || lowerMessage.includes('about leafchain')) {
          return "LeafChain is a blockchain-powered platform that rewards eco-friendly actions like tree planting and recycling with LeafCoins. You can earn coins by completing tasks, send them via QR codes, and track your impact. Want to know how to get started?";
        } else if (lowerMessage.includes('upload proof') || lowerMessage.includes('submit proof')) {
          return "To upload proof for a task, go to the 'Tasks' page, select a task, complete it, then upload an image or video (max 5MB) on the Upload page. Click 'Submit Proof' to earn your LeafCoins. Need help with a specific task?";
        } else if (lowerMessage.includes('leaderboard') || lowerMessage.includes('ranking')) {
          return "The Leaderboard shows the top users based on their LeafCoin balances. Click 'Leaderboard' in the navigation bar to view it. Keep completing tasks to climb the ranks! Any other questions?";
        } else {
          return "I'm not sure how to help with that. Could you clarify or ask about a specific feature, like sending LeafCoins or completing tasks? You can also email support@leafchain.org for assistance.";
        }
      };

      useEffect(() => {
        setMessages([
          {
            sender: 'bot',
            text: 'Welcome to LeafChain Support Chat! I’m here to help you navigate the website, troubleshoot issues, or answer any questions. Try asking: “How do I create an account?” or “QR scanner not working”. What can I assist you with?'
          }
        ]);
      }, []);

      useEffect(() => {
        if (chatRef.current) {
          chatRef.current.scrollTop = chatRef.current.scrollHeight;
        }
      }, [messages]);

      const handleSend = () => {
        if (!input.trim()) return;
        setMessages(prev => [...prev, { sender: 'user', text: input }]);
        setTimeout(() => {
          setMessages(prev => [...prev, { sender: 'bot', text: getBotResponse(input) }]);
        }, 1000);
        setInput('');
      };

      const handleKeyPress = (e) => {
        if (e.key === 'Enter') {
          handleSend();
        }
      };

      return (
        <div className="min-h-screen bg-gray-50 p-6 flex items-center justify-center">
          <div className="bg-white p-6 rounded-xl shadow-lg w-full max-w-2xl animate-fade-in">
            <div className="flex justify-between items-center mb-4">
              <h3 className="text-2xl font-bold font-inter text-green-700">LeafChain Support Chat</h3>
              <button
                onClick={() => setCurrentPage('Home')}
                className="text-gray-600 hover:text-gray-800 font-inter"
                aria-label="Close chat"
              >
                ✕
              </button>
            </div>
            <div
              className="h-[60vh] overflow-y-auto mb-4 p-4 bg-gray-50 rounded-lg"
              ref={chatRef}
              role="log"
              aria-live="polite"
            >
              {messages.map((msg, index) => (
                <div
                  key={index}
                  className={`mb-2 p-3 rounded-lg max-w-[80%] ${
                    msg.sender === 'user'
                      ? 'bg-green-100 text-green-800 ml-auto'
                      : 'bg-gray-100 text-gray-800 mr-auto'
                  }`}
                >
                  <p className="font-open-sans">{msg.text}</p>
                </div>
              ))}
            </div>
            <div className="flex space-x-2">
              <input
                type="text"
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyPress={handleKeyPress}
                placeholder="Type your question..."
                className="flex-1 p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300"
                aria-label="Chat input"
              />
              <button
                onClick={handleSend}
                className="bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300"
                aria-label="Send message"
              >
                Send
              </button>
            </div>
          </div>
        </div>
      );
    };

    // Create Account Page
    const CreateAccount = ({ setCurrentPage }) => {
      const [username, setUsername] = useState('');
      const [email, setEmail] = useState('');
      const [password, setPassword] = useState('');

      const handleSubmit = (e) => {
        e.preventDefault();
        if (!username || !email || !password) {
          alert('All fields are required.');
          return;
        }
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          alert('Please enter a valid email address.');
          return;
        }
        if (password.length < 6) {
          alert('Password must be at least 6 characters long.');
          return;
        }
        const users = getUsers();
        if (users.some(user => user.username === username)) {
          alert('Username already exists. Please choose a different username.');
          return;
        }
        if (users.some(user => user.email === email)) {
          alert('Email already registered. Please use a different email.');
          return;
        }
        const user = { username, email, password };
        saveUser(user);
        alert(`Account created successfully for ${username}! Please log in.`);
        setCurrentPage('Login');
      };

      return (
        <div className="min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center p-6">
          <div className="bg-white p-8 rounded-xl shadow-lg w-full max-w-md animate-fade-in">
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-6 text-center">Create Account</h2>
            <div className="space-y-4">
              <div>
                <label className="block text-gray-700 font-open-sans mb-1">Username</label>
                <input
                  type="text"
                  value={username}
                  onChange={(e) => setUsername(e.target.value)}
                  className="w-full p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300"
                  required
                  aria-label="Username"
                />
              </div>
              <div>
                <label className="block text-gray-700 font-open-sans mb-1">Email</label>
                <input
                  type="email"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  className="w-full p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300"
                  required
                  aria-label="Email"
                />
              </div>
              <div>
                <label className="block text-gray-700 font-open-sans mb-1">Password</label>
                <input
                  type="password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  className="w-full p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300"
                  required
                  aria-label="Password"
                />
              </div>
              <button
                onClick={handleSubmit}
                className="w-full bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300 shadow-md"
                aria-label="Sign Up"
              >
                Sign Up
              </button>
            </div>
          </div>
        </div>
      );
    };

    // Login Page
    const Login = ({ setCurrentPage, setLoggedInUser }) => {
      const [username, setUsername] = useState('');
      const [password, setPassword] = useState('');

      const handleLogin = (e) => {
        e.preventDefault();
        if (!username || !password) {
          alert('Please enter both username and password.');
          return;
        }
        const users = getUsers();
        const user = users.find(user => user.username === username && user.password === password);
        if (user) {
          alert(`Welcome back, ${username}!`);
          setLoggedInUser(username);
          setCurrentPage('Dashboard');
        } else {
          alert('Invalid username or password. Please try again or create an account.');
        }
      };

      return (
        <div className="min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center p-6">
          <div className="bg-white p-8 rounded-xl shadow-lg w-full max-w-md animate-fade-in">
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-6 text-center">Login</h2>
            <div className="space-y-4">
              <div>
                <label className="block text-gray-700 font-open-sans mb-1">Username</label>
                <input
                  type="text"
                  value={username}
                  onChange={(e) => setUsername(e.target.value)}
                  className="w-full p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300"
                  required
                  aria-label="Username"
                />
              </div>
              <div>
                <label className="block text-gray-700 font-open-sans mb-1">Password</label>
                <input
                  type="password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  className="w-full p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300"
                  required
                  aria-label="Password"
                />
              </div>
              <button
                onClick={handleLogin}
                className="w-full bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300 shadow-md"
                aria-label="Login"
              >
                Login
              </button>
            </div>
          </div>
        </div>
      );
    };

    // QR Scanner Modal Component
    const QRScannerModal = React.memo(({ isOpen, onClose, onScan, coins, uploadMode }) => {
      const videoRef = useRef(null);
      const canvasRef = useRef(null);
      const fileInputRef = useRef(null);
      const [stream, setStream] = useState(null);
      const [amount, setAmount] = useState('');
      const [scannedAddress, setScannedAddress] = useState('');
      const [scanning, setScanning] = useState(false);
      const [error, setError] = useState('');
      const [imagePreview, setImagePreview] = useState(null);
      const [isCapturing, setIsCapturing] = useState(false);
      const maxFileSize = 5 * 1024 * 1024; // 5MB

      useEffect(() => {
        if (isOpen && !uploadMode && videoRef.current && !stream) {
          setScanning(true);
          navigator.mediaDevices
            .getUserMedia({ video: { facingMode: 'environment' } })
            .then((mediaStream) => {
              setStream(mediaStream);
              videoRef.current.srcObject = mediaStream;
              videoRef.current.play().catch(() => {
                setError('Unable to start webcam. Please ensure camera permissions are granted.');
                setScanning(false);
              });
            })
            .catch(() => {
              setError('Unable to access webcam. Please upload a QR code image.');
              setScanning(false);
            });
        } else if (isOpen && uploadMode && fileInputRef.current && !isCapturing) {
          setIsCapturing(true);
          try {
            fileInputRef.current.click();
          } catch (e) {
            setError('Unable to open camera. Please select an image manually.');
          }
        }
        return () => {
          if (stream) {
            stream.getTracks().forEach(track => track.stop());
            setStream(null);
          }
          setScanning(false);
        };
      }, [isOpen, uploadMode, stream, isCapturing]);

      useEffect(() => {
        let interval;
        if (scanning && videoRef.current && canvasRef.current) {
          const scanQRCode = () => {
            const canvas = canvasRef.current;
            const context = canvas.getContext('2d');
            const video = videoRef.current;
            if (video.readyState === video.HAVE_ENOUGH_DATA) {
              canvas.width = video.videoWidth;
              canvas.height = video.videoHeight;
              context.drawImage(video, 0, 0, canvas.width, canvas.height);
              const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
              if (window.jsQR) {
                const code = window.jsQR(imageData.data, imageData.width, imageData.height);
                if (code && code.data) {
                  try {
                    const data = JSON.parse(code.data);
                    if (data.walletAddress && typeof data.walletAddress === 'string' && data.walletAddress.length > 0) {
                      setScannedAddress(data.walletAddress);
                      setScanning(false);
                      setError('');
                    } else {
                      setError('Invalid QR code format: Missing or invalid wallet address.');
                    }
                  } catch (e) {
                    setError('Error parsing QR code: Invalid format.');
                  }
                }
              }
            }
          };
          interval = setInterval(scanQRCode, 100);
        }
        return () => clearInterval(interval);
      }, [scanning]);

      const handleImageUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          if (file.size > maxFileSize) {
            setError('File size exceeds 5MB limit.');
            return;
          }
          if (!file.type.startsWith('image/')) {
            setError('Please upload an image file.');
            return;
          }
          const reader = new FileReader();
          reader.onload = (event) => {
            setImagePreview(event.target.result);
            const img = new Image();
            img.onload = () => {
              const canvas = canvasRef.current;
              const context = canvas.getContext('2d');
              canvas.width = img.width;
              canvas.height = img.height;
              context.drawImage(img, 0, 0);
              const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
              if (window.jsQR) {
                const code = window.jsQR(imageData.data, imageData.width, imageData.height);
                if (code && code.data) {
                  try {
                    const data = JSON.parse(code.data);
                    if (data.walletAddress && typeof data.walletAddress === 'string' && data.walletAddress.length > 0) {
                      setScannedAddress(data.walletAddress);
                      setError('');
                    } else {
                      setError('Invalid QR code format: Missing or invalid wallet address.');
                    }
                  } catch (e) {
                    setError('Error parsing QR code: Invalid format.');
                  }
                } else {
                  setError('No QR code found in the image.');
                }
              } else {
                setError('QR code library not loaded.');
              }
            };
            img.src = event.target.result;
          };
          reader.readAsDataURL(file);
        }
      };

      const handleSend = () => {
        if (!scannedAddress) {
          setError('Please scan or upload a valid QR code.');
          return;
        }
        const amountNum = parseInt(amount);
        if (!amountNum || amountNum <= 0) {
          setError('Please enter a positive amount.');
          return;
        }
        if (amountNum > coins) {
          setError('Insufficient LeafCoins.');
          return;
        }
        if (scannedAddress.length < 10) {
          setError('Invalid recipient wallet address.');
          return;
        }
        onScan(scannedAddress, amountNum);
        setAmount('');
        setScannedAddress('');
        setImagePreview(null);
        setError('');
        onClose();
      };

      const handleClose = () => {
        setAmount('');
        setScannedAddress('');
        setImagePreview(null);
        setError('');
        setScanning(false);
        setIsCapturing(false);
        if (stream) {
          stream.getTracks().forEach(track => track.stop());
          setStream(null);
        }
        onClose();
      };

      const handleRetake = () => {
        setImagePreview(null);
        setScannedAddress('');
        setError('');
        setIsCapturing(true);
        if (fileInputRef.current) {
          fileInputRef.current.value = '';
          fileInputRef.current.click();
        }
      };

      if (!isOpen) return null;

      return (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" role="dialog" aria-modal="true" aria-label="QR Code Scanner">
          <div className="bg-white p-6 rounded-xl shadow-lg max-w-md w-full animate-fade-in">
            <h3 className="text-xl font-inter text-green-600 mb-4 text-center">
              {uploadMode ? 'Upload QR Code from Camera' : 'Scan QR Code'}
            </h3>
            <div aria-live="polite">
              {error && (
                <p className="text-red-600 font-open-sans mb-4 text-center">{error}</p>
              )}
            </div>
            <div className="flex flex-col items-center space-y-4">
              {uploadMode ? (
                <>
                  {imagePreview ? (
                    <img
                      src={imagePreview}
                      alt="Captured QR code"
                      className="w-full max-w-xs h-auto rounded-lg"
                      aria-label="Preview of captured QR code"
                    />
                  ) : (
                    <p className="font-open-sans text-gray-600">Capture a QR code image</p>
                  )}
                  <input
                    type="file"
                    accept="image/*"
                    capture="environment"
                    onChange={handleImageUpload}
                    ref={fileInputRef}
                    className="hidden"
                    aria-label="Capture QR code from camera"
                  />
                  {imagePreview && (
                    <button
                      onClick={handleRetake}
                      className="bg-blue-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-blue-700 transition duration-300 w-full"
                      aria-label="Retake QR code photo"
                    >
                      Retake Photo
                    </button>
                  )}
                  {!imagePreview && (
                    <input
                      type="file"
                      accept="image/*"
                      onChange={handleImageUpload}
                      className="w-full p-3 border rounded-lg font-open-sans"
                      aria-label="Upload QR code image from gallery"
                    />
                  )}
                </>
              ) : (
                <>
                  {stream && !error ? (
                    <video
                      ref={videoRef}
                      className="w-full max-w-xs rounded-lg"
                      aria-label="Webcam feed for QR code scanning"
                    />
                  ) : (
                    <p className="font-open-sans text-gray-600">Loading webcam...</p>
                  )}
                  <canvas ref={canvasRef} className="hidden" />
                  <input
                    type="file"
                    accept="image/*"
                    onChange={handleImageUpload}
                    className="w-full p-3 border rounded-lg font-open-sans"
                    aria-label="Upload QR code image"
                  />
                </>
              )}
              {scannedAddress && (
                <p className="font-open-sans text-gray-600 break-all">
                  Scanned Address: {scannedAddress.slice(0, 6)}...{scannedAddress.slice(-4)}
                </p>
              )}
              <input
                type="number"
                value={amount}
                onChange={(e) => setAmount(e.target.value)}
                placeholder="Enter amount (LC)"
                className="w-full p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500"
                min="1"
                aria-label="Amount of LeafCoins to send"
              />
              <div className="flex space-x-4">
                <button
                  onClick={handleSend}
                  className="bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300"
                  aria-label="Send LeafCoins"
                >
                  Send
                </button>
                <button
                  onClick={handleClose}
                  className="bg-gray-300 text-gray-700 p-3 rounded-lg font-inter font-semibold hover:bg-gray-400 transition duration-300"
                  aria-label="Cancel QR code scanning"
                >
                  Cancel
                </button>
              </div>
            </div>
          </div>
        </div>
      );
    });

    // Dashboard Page
    const Dashboard = ({ coins, setCurrentPage, walletAddress, loggedInUser, transactions, setCoins, setTransactions }) => {
      const [isScannerOpen, setIsScannerOpen] = useState(false);
      const [isUploadMode, setIsUploadMode] = useState(false);
      const [randomAddress, setRandomAddress] = useState('');
      const [copied, setCopied] = useState(false);

      const generateRandomAddress = () => {
        const chars = '0123456789abcdef';
        let address = '0x';
        for (let i = 0; i < 40; i++) {
          address += chars[Math.floor(Math.random() * chars.length)];
        }
        return address;
      };

      const handleGenerateRandomQR = () => {
        setRandomAddress(generateRandomAddress());
      };

      const handleResetAddress = () => {
        setRandomAddress('');
      };

      const handleCopyAddress = () => {
        const address = randomAddress || walletAddress;
        if (navigator.clipboard) {
          navigator.clipboard.writeText(address).then(() => {
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          }).catch(() => {
            alert('Failed to copy address. Please copy it manually.');
          });
        } else {
          alert('Clipboard not supported. Please copy the address manually: ' + address);
        }
      };

      const qrValue = useMemo(() => {
        const address = randomAddress || walletAddress;
        return address ? JSON.stringify({ walletAddress: address }) : '';
      }, [walletAddress, randomAddress]);

      const handleSendCoins = (recipientAddress, amount) => {
        setCoins(prev => prev - amount);
        setTransactions(prev => [
          {
            id: Date.now(),
            taskTitle: `Sent to ${recipientAddress.slice(0, 6)}...${recipientAddress.slice(-4)}`,
            amount: amount,
            timestamp: new Date().toISOString(),
            type: 'Sent',
            recipientAddress: recipientAddress
          },
          ...prev
        ]);
        alert(`Sent ${amount} LC to ${recipientAddress.slice(0, 6)}...${recipientAddress.slice(-4)}`);
      };

      const handleCloseModal = () => {
        setIsScannerOpen(false);
        setIsUploadMode(false);
      };

      return (
        <div className="min-h-screen bg-gray-50 p-6">
          <div className="container mx-auto">
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-8 text-center animate-fade-in">
              {loggedInUser ? `Welcome, ${loggedInUser}!` : 'Dashboard'}
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
              <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 animate-fade-in">
                <h3 className="text-xl font-inter text-green-600 mb-4">Wallet</h3>
                {walletAddress ? (
                  <p className="font-open-sans text-gray-600 break-all">Connected: {walletAddress}</p>
                ) : (
                  <button
                    onClick={() => setCurrentPage('WalletConnect')}
                    className="bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300 shadow-md"
                    aria-label="Connect Web3 Wallet"
                  >
                    Connect Web3 Wallet
                  </button>
                )}
              </div>
              <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 animate-fade-in">
                <h3 className="text-xl font-inter text-green-600 mb-4">LeafCoins</h3>
                <div className="flex items-center">
                  <p className="text-3xl font-open-sans text-green-600 animate-pulse">{coins} LC</p>
                  <img
                    src="https://images.unsplash.com/photo-1612872087720-48736c15b9b7?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
                    alt="LeafCoin"
                    className="w-8 h-8 ml-2 transition-transform hover:rotate-15"
                  />
                </div>
              </div>
            </div>
            <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 animate-fade-in mb-8">
              <h3 className="text-xl font-inter text-green-600 mb-4">Transaction History</h3>
              {transactions.length === 0 ? (
                <p className="font-open-sans text-gray-600 text-center">
                  No transactions yet. Scan a QR code to send LeafCoins or complete tasks to earn them!
                </p>
              ) : (
                <div className="overflow-x-auto">
                  <table className="min-w-full">
                    <thead>
                      <tr className="bg-green-50">
                        <th className="text-left p-4 font-inter text-green-700 w-[25%]">Date/Time</th>
                        <th className="text-left p-4 font-inter text-green-700 w-[25%]">Type</th>
                        <th className="text-left p-4 font-inter text-green-700 w-[25%]">Task/Recipient</th>
                        <th className="text-left p-4 font-inter text-green-700 w-[25%]">Amount</th>
                      </tr>
                    </thead>
                    <tbody>
                      {transactions.map((tx) => (
                        <tr
                          key={tx.id}
                          className="border-b hover:bg-gray-50 transition duration-300"
                        >
                          <td className="p-4 font-open-sans text-gray-600">
                            {new Date(tx.timestamp).toLocaleString()}
                          </td>
                          <td className="p-4 font-open-sans text-gray-600">{tx.type}</td>
                          <td className="p-4 font-open-sans text-gray-600">{tx.taskTitle}</td>
                          <td className="p-4 font-open-sans text-green-600">{tx.amount} LC</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              )}
            </div>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 animate-fade-in">
                <h3 className="text-xl font-inter text-green-600 mb-4">Send Coins</h3>
                <div className="flex flex-col space-y-4">
                  <button
                    onClick={() => {
                      setIsScannerOpen(true);
                      setIsUploadMode(false);
                    }}
                    className="bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300 shadow-md w-full"
                    aria-label="Scan QR Code to Send Coins"
                  >
                    Scan QR Code to Send
                  </button>
                  <button
                    onClick={() => {
                      setIsScannerOpen(true);
                      setIsUploadMode(true);
                    }}
                    className="bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300 shadow-md w-full"
                    aria-label="Upload QR Code from Camera"
                  >
                    Upload QR Code from Camera
                  </button>
                </div>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 animate-fade-in">
                <h3 className="text-xl font-inter text-green-600 mb-4">Receive Coins</h3>
                {walletAddress ? (
                  <>
                    {QRCode && qrValue ? (
                      <div className="flex justify-center mb-4">
                        <QRCode
                          value={qrValue}
                          size={128}
                          className="border border-gray-200 p-2 bg-white rounded-lg"
                          aria-label="QR code for receiving LeafCoins"
                        />
                      </div>
                    ) : (
                      <p className="font-open-sans text-gray-600 text-center mb-4">
                        QR code library not loaded.
                      </p>
                    )}
                    <p className="font-open-sans text-gray-600 text-center mb-4 break-all">
                      Address: {(randomAddress || walletAddress).slice(0, 6)}...{(randomAddress || walletAddress).slice(-4)}
                    </p>
                    <div className="flex flex-col space-y-2">
                      <button
                        onClick={handleGenerateRandomQR}
                        className="bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300"
                        aria-label="Generate Random QR Code"
                      >
                        Generate Random QR Code
                      </button>
                      {randomAddress && (
                        <button
                          onClick={handleResetAddress}
                          className="bg-gray-300 text-gray-700 p-3 rounded-lg font-inter font-semibold hover:bg-gray-400 transition duration-300"
                          aria-label="Reset to My Address"
                        >
                          Reset to My Address
                        </button>
                      )}
                      <button
                        onClick={handleCopyAddress}
                        className="bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300"
                        aria-label="Copy Address"
                      >
                        {copied ? 'Copied!' : 'Copy Address'}
                      </button>
                    </div>
                    <p className="font-open-sans text-gray-600 text-center mt-4">
                      Share this QR code or address to receive LeafCoins.
                    </p>
                  </>
                ) : (
                  <div className="text-center">
                    <p className="font-open-sans text-gray-600 mb-4">
                      Connect a wallet to receive LeafCoins.
                    </p>
                    <button
                      onClick={() => setCurrentPage('WalletConnect')}
                      className="bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300"
                      aria-label="Connect Wallet"
                    >
                      Connect Wallet
                    </button>
                  </div>
                )}
              </div>
            </div>
          </div>
          {window.jsQR ? (
            <QRScannerModal
              isOpen={isScannerOpen}
              onClose={handleCloseModal}
              onScan={handleSendCoins}
              coins={coins}
              uploadMode={isUploadMode}
            />
          ) : (
            isScannerOpen && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div className="bg-white p-6 rounded-xl shadow-lg max-w-md w-full animate-fade-in">
                  <p className="font-open-sans text-red-600 text-center">
                    QR code scanner library not loaded.
                  </p>
                  <button
                    onClick={handleCloseModal}
                    className="mt-4 bg-gray-300 text-gray-700 p-3 rounded-lg font-inter font-semibold hover:bg-gray-400 transition duration-300 w-full"
                    aria-label="Close"
                  >
                    Close
                  </button>
                </div>
              </div>
            )
          )}
        </div>
      );
    };

    // WalletConnect Page
    const WalletConnect = ({ setWalletAddress, setCurrentPage }) => {
      const [address, setAddress] = useState('');
      const [network, setNetwork] = useState('');
      const networks = ['BEP20', 'ERC20', 'BTC', 'BNB Smart Chain', 'Optimism'];

      const handleConnect = () => {
        if (!address) {
          alert('Please enter a wallet address.');
          return;
        }
        if (!network) {
          alert('Please select a network type.');
          return;
        }
        if (address.length < 10) {
          alert('Invalid wallet address. Please enter a valid address.');
          return;
        }
        setWalletAddress(address);
        alert(`Wallet connected: ${address} on ${network} network.`);
        setCurrentPage('Dashboard');
      };

      return (
        <div className="min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center p-6">
          <div className="bg-white p-8 rounded-xl shadow-lg w-full max-w-md animate-fade-in">
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-6 text-center">Connect Web3 Wallet</h2>
            <div className="space-y-6">
              <div>
                <label className="block text-gray-700 font-open-sans mb-1">Wallet Address</label>
                <input
                  type="text"
                  value={address}
                  onChange={(e) => setAddress(e.target.value)}
                  placeholder="Enter your wallet address"
                  className="w-full p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300"
                  required
                  aria-label="Wallet Address"
                />
              </div>
              <div>
                <label className="block text-gray-700 font-open-sans mb-1">Network Type</label>
                <select
                  value={network}
                  onChange={(e) => setNetwork(e.target.value)}
                  className="w-full p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300"
                  required
                  aria-label="Network Type"
                >
                  <option value="" disabled>Select a network</option>
                  {networks.map((net) => (
                    <option key={net} value={net}>{net}</option>
                  ))}
                </select>
              </div>
              <button
                onClick={handleConnect}
                className="w-full bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300 shadow-md"
                aria-label="Connect Wallet"
              >
                Connect Wallet
              </button>
            </div>
          </div>
        </div>
      );
    };

    // Leaderboard Page
    const Leaderboard = () => {
      const leaderboardData = [
        { username: "EcoWarrior", coins: 500 },
        { username: "GreenThumb", coins: 450 },
        { username: "TreeHugger", coins: 400 },
        { username: "PlanetSaver", coins: 350 },
        { username: "EcoStar", coins: 300 },
      ];

      return (
        <div className="min-h-screen bg-gray-50 p-6">
          <div className="container mx-auto">
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-8 text-center animate-fade-in">Leaderboard</h2>
            <div className="bg-white p-6 rounded-xl shadow-md animate-fade-in">
              <table className="w-full">
                <thead>
                  <tr className="bg-green-50">
                    <th className="text-left p-4 font-inter text-green-700">Rank</th>
                    <th className="text-left p-4 font-inter text-green-700">Username</th>
                    <th className="text-left p-4 font-inter text-green-700">LeafCoins</th>
                  </tr>
                </thead>
                <tbody>
                  {leaderboardData.map((user, index) => (
                    <tr
                      key={index}
                      className={`border-b hover:bg-gray-50 transition duration-300 ${index % 2 === 0 ? 'bg-gray-100' : 'bg-white'}`}
                    >
                      <td className="p-4 font-open-sans text-gray-600">{index + 1}</td>
                      <td className="p-4 font-open-sans text-gray-600">{user.username}</td>
                      <td className="p-4 font-open-sans text-green-600">{user.coins} LC</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      );
    };

    // Tasks Page
    const Tasks = ({ setCurrentPage, completedTasks, setCompletedTasks }) => {
      const dailyTasks = [
        { id: 1, title: "Plant a Tree", reward: 50, description: "Plant a tree in your community.", image: "https://media.giphy.com/media/l0Iyl55kTeh71nTWw/giphy.gif" },
        { id: 2, title: "Reduce Emissions", reward: 30, description: "Use public transport for a day.", image: "https://media.giphy.com/media/3o7btPCcdNniyf0ArS/giphy.gif" },
        { id: 3, title: "Recycle Waste", reward: 20, description: "Recycle 5 plastic bottles.", image: "https://media.giphy.com/media/xT9IgG50fb1LvZ0zv2/giphy.gif" },
        { id: 4, title: "Compost Organic Waste", reward: 15, description: "Start composting kitchen scraps.", image: "https://media.giphy.com/media/26gR0YFZxW3xK6Jva/giphy.gif" },
        { id: 5, title: "Use Reusable Bags", reward: 25, description: "Use reusable bags for shopping.", image: "https://media.giphy.com/media/l4FGpPki5v2r7bW1O/giphy.gif" },
        { id: 6, title: "Attend a Cleanup Event", reward: 40, description: "Join a local cleanup event.", image: "https://media.giphy.com/media/3o7btNzlF3EZLxgU2k/giphy.gif" },
      ];

      const weeklyTasks = [
        { id: 7, title: "Switch to LED Bulbs", reward: 100, description: "Replace incandescent bulbs with LED bulbs in your home.", image: "https://media.giphy.com/media/3o7TKsQbY2YkZ6X6gM/giphy.gif" },
        { id: 8, title: "Carpool for a Week", reward: 80, description: "Carpool with colleagues or friends for a full week.", image: "https://media.giphy.com/media/l0IylOPCNkiqOgMyA/giphy.gif" },
        { id: 9, title: "Plant a Garden", reward: 120, description: "Start a small vegetable or herb garden.", image: "https://media.giphy.com/media/3o7TKtnbY2YkZ6X6gM/giphy.gif" },
      ];

      const handleTaskComplete = (task) => {
        alert(`Task "${task.title}" selected! Please upload proof.`);
        setCurrentPage('Upload', { selectedTask: task });
      };

      return (
        <div className="min-h-screen bg-gray-50 p-6">
          <div className="container mx-auto">
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-8 text-center animate-fade-in">Daily Tasks</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16">
              {dailyTasks.map(task => (
                <div key={task.id} className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 animate-fade-in">
                  <img
                    src={task.image}
                    alt={task.title}
                    className="w-full h-48 object-cover rounded-lg mb-4"
                  />
                  <h3 className="text-xl font-inter text-gray-700 mb-2">{task.title}</h3>
                  <p className="font-open-sans text-gray-600 mb-4">{task.description}</p>
                  <p className="font-open-sans text-green-600 mb-4">Reward: {task.reward} LC</p>
                  {completedTasks.includes(task.id) ? (
                    <p className="font-open-sans text-green-600 font-semibold">Completed!</p>
                  ) : (
                    <button
                      onClick={() => handleTaskComplete(task)}
                      className="w-full bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300 shadow-md"
                      aria-label={`Complete ${task.title} Task`}
                    >
                      Complete Task
                    </button>
                  )}
                </div>
              ))}
            </div>
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-8 text-center animate-fade-in">Weekly Tasks in Offer</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {weeklyTasks.map(task => (
                <div key={task.id} className="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 animate-fade-in">
                  <img
                    src={task.image}
                    alt={task.title}
                    className="w-full h-48 object-cover rounded-lg mb-4"
                  />
                  <h3 className="text-xl font-inter text-gray-700 mb-2">{task.title}</h3>
                  <p className="font-open-sans text-gray-600 mb-4">{task.description}</p>
                  <p className="font-open-sans text-green-600 mb-4">Reward: {task.reward} LC</p>
                  {completedTasks.includes(task.id) ? (
                    <p className="font-open-sans text-green-600 font-semibold">Completed!</p>
                  ) : (
                    <button
                      onClick={() => handleTaskComplete(task)}
                      className="w-full bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300 shadow-md"
                      aria-label={`Complete ${task.title} Task`}
                    >
                      Complete Task
                    </button>
                  )}
                </div>
              ))}
            </div>
          </div>
        </div>
      );
    };

    // Upload Page
    const Upload = ({ selectedTask, setCurrentPage, setCompletedTasks, setCoins, setTransactions }) => {
      const [file, setFile] = useState(null);
      const [preview, setPreview] = useState(null);
      const maxFileSize = 5 * 1024 * 1024; // 5MB in bytes

      const handleFileChange = (e) => {
        const selectedFile = e.target.files[0];
        if (selectedFile) {
          if (selectedFile.size > maxFileSize) {
            alert("File size exceeds 5MB limit!");
            return;
          }
          if (!selectedFile.type.startsWith('image/') && !selectedFile.type.startsWith('video/')) {
            alert("Please upload an image or video file!");
            return;
          }
          setFile(selectedFile);
          const reader = new FileReader();
          reader.onloadend = () => {
            setPreview(reader.result);
          };
          reader.readAsDataURL(selectedFile);
        }
      };

      const handleUpload = () => {
        if (file) {
          alert(`Uploading ${file.name}... Proof submitted successfully for "${selectedTask.title}"! Earned ${selectedTask.reward} LeafCoins!`);
          setCompletedTasks(prev => [...prev, selectedTask.id]);
          setCoins(prev => prev + selectedTask.reward);
          setTransactions(prev => [
            {
              id: Date.now(),
              taskTitle: selectedTask.title,
              amount: selectedTask.reward,
              timestamp: new Date().toISOString(),
              type: 'Claimed'
            },
            ...prev
          ]);
          setFile(null);
          setPreview(null);
          setCurrentPage('Tasks');
        } else {
          alert("Please select a file to upload!");
        }
      };

      return (
        <div className="min-h-screen bg-gray-50 p-6 flex items-center justify-center">
          <div className="bg-white p-8 rounded-xl shadow-lg w-full max-w-md animate-fade-in">
            <h2 className="text-3xl font-bold font-inter text-green-700 mb-6 text-center">Upload Proof for {selectedTask.title}</h2>
            <p className="font-open-sans text-gray-600 mb-6 text-center">
              Upload a photo or video (max 5MB) to verify your eco-action.
            </p>
            <div className="mb-6">
              <input
                type="file"
                accept="image/*,video/*"
                onChange={handleFileChange}
                className="w-full p-3 border rounded-lg font-open-sans focus:ring-2 focus:ring-green-500 focus:outline-none transition duration-300"
                aria-label="Upload proof file"
              />
            </div>
            {preview && (
              <div className="mb-6">
                {file.type.startsWith('image/') ? (
                  <img src={preview} alt="Preview" className="w-full h-auto rounded-lg shadow-md" />
                ) : (
                  <video src={preview} controls className="w-full h-auto rounded-lg shadow-md" aria-label="Video preview" />
                )}
              </div>
            )}
            <button
              onClick={handleUpload}
              className="w-full bg-green-600 text-white p-3 rounded-lg font-inter font-semibold hover:bg-green-700 transition duration-300 shadow-md"
              aria-label="Submit Proof"
            >
              Submit Proof
            </button>
          </div>
        </div>
      );
    };

    // Main App Component
    const App = () => {
      const [currentPage, setCurrentPage] = useState('Home');
      const [pageProps, setPageProps] = useState({});
      const [completedTasks, setCompletedTasks] = useState([]);
      const [coins, setCoins] = useState(100);
      const [walletAddress, setWalletAddress] = useState('');
      const [loggedInUser, setLoggedInUser] = useState('');
      const [transactions, setTransactions] = useState([]);

      const setCurrentPageWithProps = (page, props = {}) => {
        setCurrentPage(page);
        setPageProps(props);
      };

      const renderPage = () => {
        switch (currentPage) {
          case 'Home': return <Home setCurrentPage={setCurrentPageWithProps} />;
          case 'Create Account': return <CreateAccount setCurrentPage={setCurrentPageWithProps} />;
          case 'Login': return <Login setCurrentPage={setCurrentPageWithProps} setLoggedInUser={setLoggedInUser} />;
          case 'Dashboard': return (
            <Dashboard
              coins={coins}
              setCurrentPage={setCurrentPageWithProps}
              walletAddress={walletAddress}
              loggedInUser={loggedInUser}
              transactions={transactions}
              setCoins={setCoins}
              setTransactions={setTransactions}
            />
          );
          case 'WalletConnect': return <WalletConnect setWalletAddress={setWalletAddress} setCurrentPage={setCurrentPageWithProps} />;
          case 'Leaderboard': return <Leaderboard />;
          case 'Tasks': return <Tasks setCurrentPage={setCurrentPageWithProps} completedTasks={completedTasks} setCompletedTasks={setCompletedTasks} />;
          case 'Upload': return (
            <Upload
              selectedTask={pageProps.selectedTask}
              setCurrentPage={setCurrentPageWithProps}
              setCompletedTasks={setCompletedTasks}
              setCoins={setCoins}
              setTransactions={setTransactions}
            />
          );
          case 'LiveChat': return <LiveChat setCurrentPage={setCurrentPageWithProps} />;
          default: return <Home setCurrentPage={setCurrentPageWithProps} />;
        }
      };

      return (
        <div>
          <Navbar setCurrentPage={setCurrentPageWithProps} />
          {renderPage()}
        </div>
      );
    };

    // Render the App
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fadeIn 0.8s ease-out;
    }
    @keyframes floatRotate {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(5deg); }
      100% { transform: translateY(0) rotate(0deg); }
    }
    .animate-float-rotate {
      animation: floatRotate 5s ease-in-out infinite;
    }
    .hover\:rotate-15:hover {
      transform: rotate(15deg);
    }
  </style>
</body>
</html>